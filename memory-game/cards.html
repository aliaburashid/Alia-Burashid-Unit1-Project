<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="./js/app.js"></script>
    <link rel="stylesheet" href="./css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@3.0.3/tsparticles.confetti.bundle.min.js"></script>
    <title>Memory Game</title>

</head>

<body class="bodyCard">
    <div class="containerE">
        <h2 id="h2Card">Memory Game</h2>
        <div class="egame" id="easy"></div>
        <button class="reset" onclick="window.location.reload();"> Reset Game</button>
    </div>

    <div class="containerM">
        <h2 id="h2Card">Memory Game</h2>
        <div class="mgame" id="medium"></div>
        <button class="reset" onclick="window.location.reload();"> Reset Game</button>
    </div>

    <div class="containerH">
        <h2 id="h2Card">Memory Game</h2>
        <div class="hgame" id="hard"></div>
        <button class="reset" onclick="window.location.reload();"> Reset Game</button>
    </div>

    <div class="timer-bar">
        <div class="progress" id="progressBar"></div>
    </div>

    <div class="win-message" id="winMessage">
        <h1> Yay! You Did It! </h1>
    </div>

    <!-- Loads the correct game file based on what the user has selected -->
    <script>
        // gets the level and category from the browser's storage 
        const level = localStorage.getItem('level');      // example: "medium"
        const category = localStorage.getItem('category'); // example: "letters"

        if (level && category) { //check if both values exists
            const script = document.createElement('script'); // creates a script tag 

            // sets the filename to both level and catefory like js/mediumLetters.js
            script.src = `js/${level}${category}.js`;

            // adds the script to the page so that the file will run 
            document.body.appendChild(script);
        } 
    </script>

    <script>
        const backButton = document.createElement('button');
        backButton.textContent = 'Back';
        backButton.className = 'back-button';

        document.body.appendChild(backButton);
        const backSound = new Audio('./assets/sounds/Back.mp3');

        backButton.addEventListener("click", (evt) => {
            evt.preventDefault();
            backSound.volume = 0.3;
            backSound.play();

            setTimeout(() => {
                window.location.href = 'theme.html';
            }, 800);
        });

    </script>

</body>

</html>